---
title: 2024陈琳总选jz
date: 2024-04-11 15:00:24
tags:
---

用来记录2024年陈琳总选jz情况，和我个人的jz记录

<!-- more -->

---

## 个人jz统计

<div id="individualChart" style="width: 100%;height:1000px; margin-right: auto;"></div>

---

## pk总额

<div id="totalChart" style="width: 100%;height:1000px; margin-right: auto;"></div>
---

## flag总额比

<div id="portionChart" style="width: 100%;height:1000px; margin-right: auto;"></div>


---

## 我的jz金额

<div id="myChart" style="width: 100%;height:1000px; margin-right: auto;"></div>


<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/highcharts-more.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
<script src="https://d3js.org/d3.v5.min.js"></script>





<script>


function getRandomInt(max) {
    return Math.floor(Math.random() * Math.floor(max));
}

function getRandomColor() {
    var letters = '0123456789ABCDEF';
    var color = '#';
    for (var i = 0; i < 6; i++) {
        color += letters[Math.floor(Math.random() * 16)];
    }
    return color;
}
d3.csv("20240414pk.csv").then(pkdata => {
    
   // console.log(pkdata)
    // Convert numeric values to numbers
    
Highcharts.chart('individualChart', {
    chart: {
        type: 'packedbubble',
        height: '100%'
    },
    title: {
        text: '2024总选pk个人jz情况',
        align: 'center'
    },
    
    tooltip: {
        useHTML: true,
        headerFormat: '',
        pointFormat: '<b>{point.name}:</b> {point.value} cny',
        footerFormat: '',
        followPointer: true
    },
     plotOptions: {
        bubble: {
            maxPointWidth:120
        },
        packedbubble: {
            minSize: '10%',
            maxSize: '200%',
            zMin: 0,
            zMax: 1000,
            layoutAlgorithm: {
                splitSeries: false,
                gravitationalConstant: 0.02
            },
            dataLabels: {
                enabled: true,
                formatter: function() {
                     let fontSize;
                    if (this.point.z < 100) {
                        return ' ';}
                    if(this.point.y.length > 8) {return ' ';}
                     else if (this.point.z < 500) {
                        fontSize = '6px';
                    } else {
                        fontSize = '10px';
                    }
                    return `<span style="font-size: ${fontSize};">${this.point.name}</span>`;
                },

                
                filter: {
                    property: 'y',
                    operator: '>',
                    value: 100
                },
                style: {
                    color: 'black',
                    textOutline: 'none',
                    fontWeight: 'bold'
                }
            }
        }
    },
    series: [{
        
        name: '金额',
        
        data: pkdata.map(row=> ({
            name: row.name,
            value: +row.value,
            color: getRandomColor()
        }))

        
        
        

    }]
    
});
    });


</script>




<script>
Highcharts.chart('totalChart', {
    chart: {
        type: 'column'
    },
    title: {
        text: '2024年总选陈琳历次pk统计',
        align: 'center'
    },
    xAxis: {
        categories: ['4.14', '5.02-5.03'],
        crosshair: true
    },
    yAxis: [{
        labels: {
            format: '{value}',
            style: {
                color: Highcharts.getOptions().colors[1]
            }
        },
        min: 0,
        title: {
            text: '金额'
        },
        stackLabels: {
            enabled: true
        }
    },
    {
        title: {
            text: 'pk统计'
        },
        opposite: true
    }],
    legend: {
        align: 'left',
        x: 70,
        verticalAlign: 'top',
        y: 70,
        floating: true,
        backgroundColor:
            Highcharts.defaultOptions.legend.backgroundColor || 'white',
        borderColor: '#CCC',
        borderWidth: 1,
        shadow: false
    },
    tooltip: {
        // headerFormat: '<b>{point.x}</b><br/>',
        // pointFormat: '{point.name}: {point.y} <br/>',
        shared: true
    },
    plotOptions: {
        column: {
            stacking: 'normal',
            dataLabels: {
                enabled: true
            }
        }
    },
    series: [{
        name: '非flag金额',
        data: [25882.7, 30250.2],
        tooltip: {
            valueSuffix: '元'
        }
    }, {
        name: 'flag金额',
        data: [6500,24711.5],
        tooltip: {
            valueSuffix: '元'
        }
    }, {
        name: '总额',
        type: 'line',
        yAxis: 1,
        data: [32382.7, 54961.7],
        tooltip: {
            valueSuffix: '元'
        }
    }]
});



</script>


<script>
Highcharts.chart('portionChart', {

  title: {
    text: 'jz flag总额比',
    align: 'center'
  },

  

  yAxis: {
    min: 0,
    max: 1,
    title: {
      text: '百分比'
    },
    stackLabels: {
            enabled: true
        },
  },

  xAxis: {
    categories:[
        '4.14', '5.02-5.03'
    ]

  },

  legend: {
    layout: 'vertical',
    align: 'right',
    verticalAlign: 'middle'
  },

  plotOptions: {
    series: {
      label: {
        connectorAllowed: false
      },
      pointStart: 2010
    }
  },

  series: [{
    name: 'flag总额比',
    data: [0.2, 0.449]
  }],

  responsive: {
    rules: [{
      condition: {
        maxWidth: 500
      },
      chartOptions: {
        legend: {
          layout: 'horizontal',
          align: 'center',
          verticalAlign: 'bottom'
        }
      }
    }]
  }

});
</script>

<script>
Highcharts.chart('myChart', {
    chart: {
        type: 'column'
    },
    title: {
        text: '我的jz金额',
        align: 'center'
    },
    
    xAxis: {
        categories: ['4.14', '5.02-5.03'],
        crosshair: true,
        accessibility: {
            description: '日期'
        }
    },
    yAxis: {
        min: 0,
        
    },
    tooltip: {
        valueSuffix: '元'
    },
    plotOptions: {
        column: {
            pointPadding: 0.2,
            borderWidth: 0
        }
    },
    series: [
        {
            name: '元',
            data: [20, 1040]
        },
        
    ]
});
</script>